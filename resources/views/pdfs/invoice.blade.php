<!DOCTYPE html>
<html lang="en">

<head class="min-h-[100dvh]">
    <meta charset="UTF-8">
    <meta content="width=device-width, initial-scale=1.0"
        name="viewport">
    <meta content="ie=edge"
        http-equiv="X-UA-Compatible">
    <title>Document</title>
    @vite('resources/css/app.css')
    <style>
        table td {
            word-break: break-all;
            font-size: small
        }
    </style>
</head>
@php
    $arr = explode(',', $invoice->client->address);
@endphp

<body class="min-h-[100dvh] p-6 mb-2 space-y-4 font-spectral text-black bg-icon">
    <div class="absolute top-20 w-full z-[-1]">
        <svg fill="none"
            viewBox="0 0 234 199"
            xmlns="http://www.w3.org/2000/svg">
            <path class="fill-black/15"
                d="M111.116 177.032L113.674 177.034L116.355 177.023C119.294 177.014 122.233 177.012 125.173 177.011C127.207 177.008 129.241 177.004 131.275 177.001C135.544 176.995 139.814 176.993 144.084 176.994C149.567 176.994 155.049 176.98 160.532 176.963C164.734 176.952 168.937 176.95 173.14 176.95C175.161 176.949 177.183 176.945 179.205 176.937C182.028 176.927 184.851 176.93 187.674 176.936L190.226 176.919C193.87 176.939 195.218 176.946 196.274 177.506C196.895 177.835 197.414 178.354 198.239 179.179C197.864 182.257 197.742 183.255 197.257 184.025C197.024 184.394 196.707 184.71 196.239 185.179C193.419 185.285 190.624 185.326 187.804 185.324L185.123 185.334C182.184 185.344 179.245 185.346 176.305 185.347C174.271 185.35 172.237 185.353 170.203 185.357C165.934 185.363 161.664 185.365 157.394 185.364C151.911 185.364 146.429 185.378 140.946 185.395C136.744 185.406 132.541 185.408 128.338 185.408C126.316 185.409 124.295 185.413 122.273 185.421C119.45 185.431 116.627 185.428 113.804 185.422L111.252 185.439C107.608 185.419 106.26 185.412 105.204 184.852C104.583 184.523 104.064 184.004 103.239 183.179C103.984 177.072 105.094 177.066 111.033 177.033L111.116 177.032Z" />
            <path class="fill-black/15"
                d="M204.239 177.179C205.348 177.375 205.878 177.468 206.398 177.602C206.875 177.724 207.342 177.88 208.239 178.179C208.54 179.321 208.696 179.914 208.818 180.514C208.951 181.161 209.044 181.816 209.239 183.177L209.239 183.179L207.239 185.179C206.13 184.983 205.6 184.89 205.08 184.756C204.603 184.634 204.136 184.478 203.239 184.179C202.938 183.037 202.782 182.444 202.66 181.844C202.527 181.197 202.434 180.542 202.239 179.181L202.239 179.179L204.239 177.179Z" />
            <path class="fill-black/15"
                d="M96.398 177.602C95.8781 177.468 95.3478 177.375 94.239 177.179L92.239 179.179C92.4336 180.542 92.5272 181.197 92.6597 181.844C92.7824 182.444 92.9384 183.037 93.239 184.179C94.1355 184.478 94.6034 184.634 95.0799 184.756C95.5998 184.89 96.1301 184.983 97.239 185.179L99.239 183.179C99.0443 181.816 98.9507 181.161 98.8182 180.514C98.6955 179.914 98.5395 179.321 98.239 178.179C97.3424 177.88 96.8745 177.724 96.398 177.602Z" />
            <path class="fill-black/15"
                d="M218.239 141.179H198.239L197.239 146.179C198.426 147.366 198.908 147.848 199.491 148.099C199.89 148.27 200.335 148.333 201.087 148.438L205.716 148.452L208.239 148.429L210.762 148.452L213.592 148.444C216.434 148.44 216.979 148.439 219.239 146.179L218.239 141.179Z" />
            <path class="fill-black/15"
                clip-rule="evenodd"
                d="M58.2389 1.17892L57.2389 0.178924C54.538 -0.113083 52.8558 -0.227082 50.5475 1.29221L48.2389 3.17892C47.3726 3.87752 46.463 4.58524 45.534 5.308C39.4979 10.0043 32.6453 15.3358 31.5514 22.9289C31.3424 27.1259 30.9304 30.9629 29.9535 35.0632L29.9533 35.0642C29.2345 38.0346 28.7205 40.1586 28.242 42.2905C27.0414 47.6397 26.0641 53.039 22.635 71.983L22.6345 71.9861L22.2389 74.1789L20.1525 74.1526L17.4186 74.132C14.4738 74.1034 12.2278 74.1818 9.36395 74.9289C4.45404 77.8171 1.70991 81.6816 0.23895 87.1789C-0.479587 93.7232 0.303342 97.5512 4.22723 102.878C8.41176 108.258 12.2764 113.583 15.4616 119.632L16.2389 121.179H18.2389L20.2389 125.179L25.2389 124.179C25.2983 123.05 25.3295 122.458 25.3325 121.866C25.3357 121.211 25.3046 120.557 25.2389 119.179L23.2389 117.179C23.4927 112.865 24.4288 109.235 26.2233 105.312C26.4259 104.886 26.6286 104.461 26.8313 104.036C29.9134 97.5712 32.9832 91.1324 35.3639 84.3664C36.4705 81.2062 37.64 78.2163 39.1764 75.2414C40.8836 71.9743 42.332 68.6491 43.7389 65.2414C44.9032 62.3951 46.0656 59.5595 47.3405 56.761C49.572 51.9489 51.2635 47.1517 52.7233 42.05L53.2389 40.1789L58.0514 43.2414C60.1143 44.5534 62.1768 45.8659 64.239 47.1789L64.8673 47.581C69.3819 50.4701 73.8947 53.358 78.4694 56.1516C78.9138 56.4219 79.3583 56.6918 79.8027 56.9616L79.824 56.9745L79.8456 56.9877C83.4965 59.2042 87.1421 61.4175 90.653 63.8547C95.3676 67.2489 100.168 70.4348 105.107 73.4902L107.551 74.9914L109.908 76.4477L112.165 77.8235C113.503 78.6413 114.862 79.427 116.239 80.1789L121.239 82.1789L123.239 98.1789H117.239C116.197 99.221 115.698 99.7201 115.381 100.316C115.091 100.864 114.954 101.494 114.692 102.703L114.274 105.909L113.793 109.5C113.462 112.103 113.125 114.704 112.783 117.305C112.519 119.307 112.257 121.309 111.999 123.311C111.597 126.433 111.188 129.553 110.764 132.672C110.47 134.798 110.179 136.923 109.889 139.049L109.489 141.991C108.803 146.915 108.165 151.776 108.098 156.753C108.195 159.106 108.225 159.843 108.559 160.398C108.711 160.651 108.926 160.866 109.239 161.179C111.106 161.241 112.973 161.292 114.841 161.292L117.212 161.277C119.706 161.272 122.201 161.266 124.695 161.254C126.435 161.246 128.174 161.239 129.913 161.234C133.925 161.224 137.938 161.213 141.95 161.195L145.239 161.179V164.179C138.636 164.158 132.033 164.141 125.43 164.13L124.673 164.129C121.561 164.124 118.448 164.12 115.336 164.11C112.038 164.099 108.74 164.09 105.442 164.086L101.684 164.081L98.0036 164.066L94.6066 164.065C92.817 164.061 91.0263 164.088 89.239 164.179C83.7048 166.946 79.2389 171.297 77.239 177.179C76.7173 181.52 76.6638 185.5 79.239 189.179C82.6993 193.762 85.8444 197.675 91.7639 198.554L94.4829 198.553L97.6224 198.574L101.034 198.551C104.831 198.563 108.628 198.57 112.424 198.557C115.829 198.543 119.233 198.541 122.638 198.543C128.341 198.546 134.043 198.54 139.746 198.522C146.384 198.501 153.022 198.489 159.661 198.495C166.099 198.501 172.537 198.5 178.975 198.489L179.099 198.489C181.786 198.484 184.473 198.479 187.161 198.48C190.427 198.483 193.694 198.481 196.96 198.469L200.573 198.454L203.991 198.461L207.122 198.44C209.893 198.433 211.831 198.345 214.399 197.299C219.67 194.09 222.344 189.964 224.239 184.179C224.534 179.759 224.653 176.206 222.04 172.46L220.551 170.679L219.102 168.898C213.974 164.167 209.228 163.852 202.536 163.915L199.364 163.991C196.327 164.03 193.291 164.069 190.255 164.131L188.239 164.179V161.179C193.318 161.199 198.396 161.217 203.475 161.228C205.542 161.232 207.609 161.236 209.676 161.241C212.733 161.254 215.79 161.267 218.847 161.272L221.735 161.277L224.57 161.292L227.178 161.292L229.486 161.299C230.447 161.233 230.881 161.203 231.242 161.025C231.539 160.878 231.787 160.631 232.239 160.179C232.926 157.578 233.249 155.379 233.109 152.687L232.751 150.089L232.358 147.212L231.926 144.241C231.121 138.227 230.173 132.982 228.239 127.179H172.239C172.239 126.176 172.239 125.462 172.207 124.749C172.129 122.984 171.858 121.228 170.915 115.126L170.364 111.616L169.837 108.095L169.309 104.738C169.257 104.398 169.21 104.077 169.165 103.773C168.744 100.92 168.531 99.4708 166.239 97.1789C164.168 97.0756 162.094 96.9856 160.02 97.0031L157.614 97.0539C156.038 97.0717 154.463 97.0898 152.887 97.1086L149.239 97.1789C149.383 93.9426 149.498 90.7085 149.581 87.4699L149.676 83.4914C149.897 78.6382 150.087 73.9778 149.239 69.1789C147.852 67.0731 146.724 66.3109 144.493 65.1601C143.389 64.6965 142.807 64.4522 142.239 64.1787C141.607 63.8745 140.992 63.5341 139.694 62.8155L139.692 62.8139L139.69 62.813C137.773 61.778 135.843 60.7672 133.903 59.7773C125.191 55.376 116.562 50.8644 108.081 46.0317L106.543 45.1491L106.534 45.1437L106.524 45.1384L106.514 45.1328L106.514 45.1323C100.365 41.604 94.2263 38.0813 87.8647 34.9426L85.9265 33.9914L85.7474 33.9005C82.48 32.2418 79.2325 30.5932 75.8478 29.1819C70.9502 27.1559 66.1225 25.0833 61.838 21.9268C59.9076 18.1043 58.925 16.1585 58.4526 14.0958C57.9629 11.9572 58.0216 9.69302 58.1413 5.08127L58.2389 1.17892ZM98.9207 171.021L95.9256 171.038C95.8172 171.039 95.7108 171.039 95.6061 171.039L95.4176 171.04H95.4106C93.0084 171.043 91.5076 171.045 89.239 172.179C86.9921 174.36 85.4015 176.048 84.946 179.218C84.906 183.618 85.1831 185.982 88.0862 189.274C89.6101 190.195 90.5403 190.757 91.5447 191.103C93.1181 191.646 94.8738 191.661 99.3796 191.699L102.683 191.665C106.36 191.677 110.037 191.683 113.714 191.663C117.01 191.644 120.306 191.636 123.602 191.637C129.123 191.638 134.643 191.627 140.163 191.601C146.59 191.569 153.018 191.548 159.445 191.55C165.678 191.551 171.912 191.546 178.145 191.53C180.127 191.524 182.109 191.52 184.091 191.515C187.914 191.513 191.737 191.509 195.56 191.49L199.054 191.469L202.369 191.472L205.394 191.446C206.818 191.441 207.472 191.438 208.122 191.396C208.674 191.361 209.224 191.297 210.239 191.179C213.523 188.99 214.588 187.718 216.239 184.179C216.619 179.766 216.723 177.905 214.239 174.179C212.825 172.949 211.933 172.173 210.905 171.681C209.147 170.839 206.991 170.827 201.151 170.795L197.871 170.822C194.22 170.816 190.569 170.814 186.918 170.831C184.307 170.844 181.696 170.852 179.085 170.855C172.947 170.857 166.809 170.865 160.671 170.889C153.584 170.918 146.497 170.936 139.411 170.94C134.595 170.943 129.779 170.949 124.963 170.959L117.071 170.976C113.275 170.981 109.479 170.988 105.683 171.003L102.219 171.018L98.9207 171.021ZM158.239 105.179H161.239C163.003 111.228 163.833 117.295 164.541 123.542C164.922 126.854 165.428 129.934 166.239 133.179L222.239 134.179C223.641 143.997 224.06 146.93 224.186 149.875C224.239 151.13 224.239 152.387 224.239 154.179H116.239V151.179L118.882 150.616C122.148 149.911 125.411 149.192 128.672 148.463C130.078 148.152 131.485 147.846 132.893 147.547C139.199 146.392 142.299 145.824 145.033 144.5C147.677 143.219 149.979 141.23 154.508 137.317C157.815 131.024 157.897 124.521 157.983 117.567L157.989 117.116L158.079 113.626C158.149 110.81 158.202 107.995 158.239 105.179ZM150.239 105.179H122.239C120.442 118.167 118.708 131.149 117.239 144.179C119.344 143.757 121.45 143.334 123.553 142.904L126.176 142.366C127.045 142.193 127.916 142.026 128.787 141.859C135.701 140.533 142.615 139.207 148.282 134.827L148.283 134.826C149.103 133.688 149.657 132.919 150.026 132.071C150.792 130.313 150.767 128.211 150.689 121.754V121.752L150.551 117.804L150.239 105.179ZM52.2389 11.1789C52.7772 20.4496 51.5695 27.5558 48.2389 36.1789C47.7312 37.7598 47.2305 39.3429 46.7389 40.9289C45.818 43.7115 44.7485 46.2231 43.3639 48.8039C41.1824 52.9671 39.7675 57.3589 38.3333 61.8101L38.1059 62.5156C36.381 67.8403 34.4107 73.0224 32.2389 78.1789H29.2389C29.5222 70.7 30.7261 63.7437 32.6537 56.5354C34.0092 51.3675 34.9727 46.2051 35.8014 40.9289C36.0506 39.4145 36.3005 37.9001 36.5514 36.386C36.976 33.8228 37.3702 31.263 37.7389 28.6906C39.1131 21.1807 42.1062 17.5752 47.9616 12.7258C49.2666 11.8394 49.8238 11.4609 50.438 11.2993C50.8957 11.1789 51.385 11.1789 52.2389 11.1789ZM28.2389 84.1789C25.5692 83.0548 22.9989 82.0326 20.2389 81.1789C15.6764 80.5496 13.835 80.843 9.80145 83.1164L9.58384 83.3763C7.3701 86.0192 6.69702 86.8227 6.30145 90.1789C6.43753 92.4768 6.52809 94.006 6.94511 95.4403C7.77473 98.2938 9.89639 100.772 16.2389 108.179H18.2389C19.0553 106.484 19.8702 104.789 20.6784 103.091L21.6764 100.991L21.6785 100.987C23.4054 97.4137 25.0257 94.0608 25.9616 90.1906L26.2389 88.1789H28.2389V84.1789ZM180.239 161.179V164.179H152.239V161.179H180.239ZM66.5202 31.3391C63.4322 29.6205 60.7316 28.75 57.2389 28.1789C56.8957 28.9799 56.7095 29.4143 56.5846 29.8656C56.4366 30.4003 56.3745 30.9588 56.2389 32.1789C57.1463 33.304 57.7503 34.0528 58.43 34.7249C59.7829 36.0624 61.4361 37.096 66.3796 40.1867C68.0374 41.2082 69.6922 42.2344 71.3444 43.2649L73.9616 44.8977C78.1191 47.4796 82.2632 50.0814 86.3991 52.6977C92.0278 56.2609 97.66 59.8181 103.305 63.3547C105.783 64.905 108.255 66.4613 110.712 68.0437C112.878 69.4399 115.041 70.8328 117.239 72.1789C120.106 73.6309 122.835 75.0261 125.481 76.8469C127.308 80.7024 128.233 82.6544 128.792 84.7059C129.365 86.8088 129.553 89.0166 129.934 93.4875L130.239 97.1789H141.239V72.1789C127.508 64.8671 113.797 57.5253 100.183 49.9976C98.9703 49.3268 97.7572 48.6562 96.544 47.986C92.4409 45.7196 88.3389 43.4511 84.239 41.1789L83.8944 40.9871C80.8101 39.2699 77.7258 37.5527 74.6369 35.8437L71.739 34.2414L69.0246 32.7192L66.5202 31.3391Z"
                fill-rule="evenodd" />
        </svg>
    </div>
    <header class="flex w-full h-44 justify-between items-center">
        <div class="h-full flex flex-col justify-center gap-2 pl-1">
            <div>
                <h2 class="font-bold">Popa Ionut</h2>
            </div>
            <div>
                <p>Hofstraat 17, 2480 Dessel </p>
                <p>Tel: 0032467864650 </p>
                <p>Email: info@ipwerken.be</p>
            </div>
        </div>
        <div class="font-bold flex flex-col justify-center gap-3 h-full items-end">
            <p>BTW nr: BE 1011.068.711</p>
            <p>Iban: BE17 9734 9549 4121</p>
        </div>
        <div class="h-1/2 flex items-center justify-start">
            {{-- <img src="/images/logo.svg" class="h-4/5" alt="logo"> --}}
            @php $logo = public_path('/images/logo.svg'); @endphp
            {{-- @inlinedImage($logo) --}}
            <img alt="logo"
                src="{{ URL::asset('/images/logo.svg') }}"
                width="176">
        </div>
    </header>
    <section class="w-full flex h-28 items-center justify-end pr-6">
        <div class="flex w-1/3 justify-center gap-2">
            <span class="font-bold">Aan:</span>
            <div class="w-full">
                <p>{{ $invoice->client->name }}</p>
                @if ($invoice->client->no_btw)
                    <p>BTW nr: {{ $invoice->client->btw_number }}</p>
                @endif
                @foreach ($arr as $item)
                    <p>{{ $item }}</p>
                @endforeach
            </div>
    </section>
    <main class="min-h-48">
        <div class="w-full h-full flex flex-col px-1 items-start">
            <h1 class="w-full font-bold text-4xl text-end pr-14 italic">Factuur</h1>
            <div
                class="w-full h-1/6 flex items-center justify-center text-center leading-none font-bold border-2 border-black divide-x-2 divide-black">
                <div class="w-1/3 h-full flex flex-col justify-center items-center p-5"><span
                        class="block">Factuurnummer</span> {{ $invoice->id }}</div>
                <div class="w-1/3 h-full flex flex-col justify-center items-center p-5"><span
                        class="block">Factuurdatum</span> {{ $invoice->updated_at->format('d/m/Y') }}</div>
                <div class="w-1/3 h-full flex flex-col justify-center items-center p-5"><span
                        class="block">Vervaldatum</span>
                    {{ $invoice->expired_at }}</div>
            </div>
            <p class="w-full h-1/12 border-x-2 border-black px-1 text-sm font-bold">Locatie werken/Werf nummer:
                @if (!$invoice->client->btw_number)
                    {{ $invoice->client->address }}
                @else
                    {{ $invoice->location }}
                @endif
            </p>
            <div class="w-full h-5/6 flex">
                <table class="w-full h-full table-fixed">
                    <thead class="w-full h-14 border-b-2 text-left text-sm border-x-2 border-t-2 border-black">
                        <tr>
                            <th class="w-2/12 pl-1 border-r-2 border-black">Datum</th>
                            <th class="w-4/12 pl-1 border-r-2 border-black">Omschrijving</th>
                            <th class="w-1/12 pl-1 border-r-2 border-black">Aantal</th>
                            <th class="w-2/12 pl-1 border-r-2 border-black">Prijs</th>
                            <th class="w-1/12 pl-1 border-r-2 border-black">Excl. btw</th>
                            <th class="w-2/12 pl-1 text-center"
                                colspan="2">BTW % / €</th>
                        </tr>
                    </thead>
                    @php
                        $totalPriceNoBtw = 0;
                        $totalPriceBtw = 0;
                    @endphp
                    <tbody class="w-full min-h-[300px]">
                        @foreach ($invoice->data as $item)
                            <tr class="w-full divide-x-2 divide-black max-h-20 h-10 border-x-2 border-black">
                                @php
                                    $priceNoBtw = ($item['price'] ?? 0) * ($item['quantity'] ?? 0);
                                    $totalPriceNoBtw += $priceNoBtw;
                                    $priceBtw = ($item['btw'] / 100) * $priceNoBtw;
                                    $totalPriceBtw += $priceBtw;
                                @endphp
                                <td class="px-1">
                                    {{ Carbon\Carbon::createFromFormat('d/m/Y', $item['date'])->format('d/m/Y') }}</td>
                                <td class="px-1">{{ $item['service_materials'] ?? '-' }}</td>
                                <td class="px-1">{{ $item['quantity'] ?? 0 }}</td>
                                <td class="px-1">
                                    {{ Number::currency($item['price'] ?? 0, 'EUR', locale: 'de', precision: 2) }}</td>
                                <td class="px-1 border-b-[1px] border-black/30">
                                    {{ Number::currency($priceNoBtw, 'EUR', locale: 'de', precision: 2) }}</td>
                                <td class="px-1 border-b-[1px] border-black/30">{{ $item['btw'] }}%</td>
                                <td class="px-1">{{ Number::currency($priceBtw, 'EUR', locale: 'de', precision: 2) }}
                                </td>
                            </tr>
                        @endforeach
                        <tr
                            class="{{ count($invoice->data) > 8 ? 'w-full border-b-2 divide-x-2 divide-black border-black border-x-2' : 'w-full h-24 divide-x-2 divide-black border-black border-x-2 border-b-2' }}">
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td></td>
                        </tr>
                        <tr>
                            <td></td>
                            <td></td>
                            <td></td>
                            <td class=" border-2 border-black text-right px-3">Total:</td>
                            <td class=" border-2 border-black pl-2">
                                {{ Number::currency($totalPriceNoBtw, 'EUR', locale: 'de', precision: 2) }}</td>
                            <td class=" border-2 border-black text-center text-md font-bold pl-1"
                                colspan="2">
                                @if ($invoice->client->no_btw)
                                    BTW medecontractant
                                @else
                                    {{ Number::currency($totalPriceBtw, 'EUR', locale: 'de', precision: 2) }}
                                @endif
                            </td>
                        </tr>
                        <tr class="">
                            <td></td>
                            <td></td>
                            <td></td>
                            <td class="border-2 border-black text-right px-3 leading-6">Te betalen:</td>
                            <td class="border-2 border-black text-center bg-green-100 font-bold leading-6"
                                colspan="3">
                                @php
                                    $totalPrice = $totalPriceNoBtw + $totalPriceBtw;
                                @endphp
                                @if ($invoice->client->no_btw)
                                    {{ Number::currency($totalPriceNoBtw, 'EUR', locale: 'de', precision: 2) }}
                                @else
                                    {{ Number::currency($totalPrice, 'EUR', locale: 'de', precision: 2) }}
                                @endif
                            </td>
                        </tr>
                        <tr>
                            <td class="font-bold text-xs"
                                colspan='6'>Opmerkingen & Voorwaarden</td>
                        </tr>
                        @if ($invoice->client->no_btw)
                            <tr>
                                <td class="font-bold text-xs"
                                    colspan='6'>Btw medecontractant waar je totaal van de btw berekend</td>
                            </tr>
                        @endif
                        <tr>
                            <td class="text-xs"
                                colspan='6'>Wij verzoeken u vriendelijk het bedrag binnen 30 dagen over te maken op
                                het
                                rekeningnummer BE17 9734
                                9549
                                4121 onder vermelding van het factuurnummer. Op alle diensten zijn onze algemene
                                voorwaarden van
                                toepassing.
                            </td>
                        </tr>
                        <tr>
                            <td class="text-xs"
                                colspan='6'>
                                Deze kan u vinden op de achterzijde.
                            </td>
                        </tr>
                        {{-- <td class="font-bold">Btw medecontractant waar je totaal van de btw berekend</td>
                        <td>Wij verzoeken u vriendelijk het bedrag binnen 30 dagen over te maken op het
                            rekeningnummer BE17 9734
                            9549
                            4121 onder vermelding van het factuurnummer. Op alle diensten zijn onze algemene
                            voorwaarden van
                            toepassing.
                            Deze kan u vinden op de achterzijde.</td> --}}
                    </tbody>
                </table>
            </div>
        </div>
    </main>
</body>

</html>
